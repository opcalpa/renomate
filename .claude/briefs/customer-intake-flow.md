# KundfÃ¶rfrÃ¥gan â†’ Offert â†’ Projekt

## Designdokument v1.0

---

## 1. Ã–VERSIKT

### FlÃ¶de

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  BYGGARE                              KUND                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€                              â”€â”€â”€â”€                                  â”‚
â”‚                                                                             â”‚
â”‚  1. Skapar fÃ¶rfrÃ¥gan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 2. FÃ¥r lÃ¤nk via e-post/SMS            â”‚
â”‚     (frÃ¥n sin dashboard)                                                    â”‚
â”‚                                                                             â”‚
â”‚                                       3. Fyller i formulÃ¤r                  â”‚
â”‚                                          - Kontaktuppgifter                â”‚
â”‚                                          - Objektinfo (adress)             â”‚
â”‚                                          - Rum fÃ¶r rum: Ã¶nskemÃ¥l           â”‚
â”‚                                          - Bilder (valfritt)               â”‚
â”‚                                                                             â”‚
â”‚  4. Ser kundsvar â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  [Skickar in]                         â”‚
â”‚     i sin dashboard                                                         â”‚
â”‚                                                                             â”‚
â”‚  5. Skapar offert                                                          â”‚
â”‚     - Importerar rum/tasks/material                                        â”‚
â”‚     - SÃ¤tter priser                                                        â”‚
â”‚     - Skickar till kund â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 6. FÃ¥r offert via e-post               â”‚
â”‚                                                                             â”‚
â”‚                                       7. Granskar offert                    â”‚
â”‚                                          - Kommenterar                      â”‚
â”‚                                          - Accepterar/Avvisar              â”‚
â”‚                                                                             â”‚
â”‚  8. Offert accepterad â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  [Accepterar]                         â”‚
â”‚     - Projekt aktiveras                                                     â”‚
â”‚     - Rum/Tasks/Material skapas                                            â”‚
â”‚     - Kund bjuds in som "client"                                           â”‚
â”‚                                                                             â”‚
â”‚  9. Projektledning pÃ¥gÃ¥r              10. FÃ¶ljer arbetet i appen           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. DATABASSCHEMA

### Ny tabell: `customer_intake_requests`

```sql
CREATE TABLE customer_intake_requests (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

  -- Koppling till byggare
  creator_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,

  -- Unik token fÃ¶r publik Ã¥tkomst
  token TEXT NOT NULL UNIQUE DEFAULT encode(gen_random_bytes(24), 'hex'),

  -- Status
  status TEXT NOT NULL DEFAULT 'pending'
    CHECK (status IN ('pending', 'submitted', 'converted', 'expired', 'cancelled')),

  -- Kundinformation (fylls i av kund)
  customer_name TEXT,
  customer_email TEXT,
  customer_phone TEXT,

  -- Objektinformation (fylls i av kund)
  property_address TEXT,
  property_postal_code TEXT,
  property_city TEXT,
  property_type TEXT, -- 'villa', 'lagenhet', 'radhus', 'fritidshus', 'annat'

  -- Ã–vergripande projektinfo
  project_description TEXT,
  desired_start_date DATE,
  budget_indication TEXT, -- 'under_100k', '100k_300k', '300k_500k', '500k_1m', 'over_1m', 'unknown'

  -- Bilder (URLs till uppladdade bilder)
  images JSONB DEFAULT '[]',

  -- Rum-data (fylls i via wizard)
  rooms_data JSONB DEFAULT '[]',
  -- Format: [
  --   {
  --     "id": "uuid",
  --     "name": "KÃ¶k",
  --     "description": "Vill ha nytt kÃ¶k med kÃ¶ksÃ¶",
  --     "work_types": ["rivning", "el", "vvs", "snickeri"],
  --     "current_condition": "Gammalt 80-talskÃ¶k, fungerande",
  --     "desired_outcome": "Modernt kÃ¶k med induktionshÃ¤ll",
  --     "has_existing_drawings": false,
  --     "images": ["url1", "url2"],
  --     "priority": "high" | "medium" | "low"
  --   }
  -- ]

  -- Referens till skapad offert/projekt (fylls i vid konvertering)
  quote_id UUID REFERENCES quotes(id) ON DELETE SET NULL,
  project_id UUID REFERENCES projects(id) ON DELETE SET NULL,

  -- Metadata
  expires_at TIMESTAMPTZ DEFAULT (NOW() + INTERVAL '30 days'),
  submitted_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Index
CREATE INDEX idx_intake_creator ON customer_intake_requests(creator_id);
CREATE INDEX idx_intake_token ON customer_intake_requests(token);
CREATE INDEX idx_intake_status ON customer_intake_requests(status);

-- Trigger fÃ¶r updated_at
CREATE TRIGGER update_intake_updated_at
  BEFORE UPDATE ON customer_intake_requests
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

### RLS-policies fÃ¶r `customer_intake_requests`

```sql
-- Byggare kan se/hantera sina egna fÃ¶rfrÃ¥gningar
CREATE POLICY "Creators can manage own intake requests"
  ON customer_intake_requests
  FOR ALL
  USING (creator_id = get_user_profile_id());

-- Publik Ã¥tkomst via token (fÃ¶r kunden att fylla i)
CREATE POLICY "Public can view and update via token"
  ON customer_intake_requests
  FOR ALL
  USING (true)  -- Token-validering sker i app-logik
  WITH CHECK (true);

-- Alternativ: AnvÃ¤nd en Edge Function fÃ¶r token-baserad Ã¥tkomst
```

### Uppdatera `quotes`-tabellen

```sql
-- LÃ¤gg till kolumn fÃ¶r att koppla till intake request
ALTER TABLE quotes
  ADD COLUMN intake_request_id UUID REFERENCES customer_intake_requests(id);

-- LÃ¤gg till fÃ¤lt fÃ¶r att spÃ¥ra offertens "lÃ¥sning"
ALTER TABLE projects
  ADD COLUMN locked_for_quote BOOLEAN DEFAULT false,
  ADD COLUMN locked_at TIMESTAMPTZ,
  ADD COLUMN locked_by_quote_id UUID REFERENCES quotes(id);
```

---

## 3. KOMPONENTSTRUKTUR

```
src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ CustomerIntake.tsx              # Publik sida fÃ¶r kund (/intake/:token)
â”‚   â”œâ”€â”€ IntakeRequests.tsx              # Byggarens dashboard fÃ¶r fÃ¶rfrÃ¥gningar
â”‚   â””â”€â”€ CreateIntakeRequest.tsx         # Byggare skapar ny fÃ¶rfrÃ¥gan
â”‚
â”œâ”€â”€ components/
â”‚   â””â”€â”€ intake/
â”‚       â”œâ”€â”€ IntakeWizard.tsx            # Huvudwizard-komponent
â”‚       â”œâ”€â”€ steps/
â”‚       â”‚   â”œâ”€â”€ ContactStep.tsx         # Steg 1: Kontaktuppgifter
â”‚       â”‚   â”œâ”€â”€ PropertyStep.tsx        # Steg 2: Objektinfo
â”‚       â”‚   â”œâ”€â”€ RoomsStep.tsx           # Steg 3: LÃ¤gg till rum
â”‚       â”‚   â”œâ”€â”€ RoomDetailStep.tsx      # Steg 3b: Detaljer per rum
â”‚       â”‚   â”œâ”€â”€ SummaryStep.tsx         # Steg 4: Sammanfattning
â”‚       â”‚   â””â”€â”€ ThankYouStep.tsx        # Steg 5: BekrÃ¤ftelse
â”‚       â”‚
â”‚       â”œâ”€â”€ IntakeRequestCard.tsx       # Kort fÃ¶r att visa fÃ¶rfrÃ¥gan i lista
â”‚       â”œâ”€â”€ IntakeRequestDetail.tsx     # Detaljvy fÃ¶r byggare
â”‚       â”œâ”€â”€ ConvertToQuoteDialog.tsx    # Dialog fÃ¶r att konvertera till offert
â”‚       â””â”€â”€ IntakeRoomCard.tsx          # Kort fÃ¶r rum i fÃ¶rfrÃ¥gan
â”‚
â””â”€â”€ services/
    â””â”€â”€ intakeService.ts                # API-wrapper fÃ¶r intake requests
```

---

## 4. WIZARD-FLÃ–DE FÃ–R KUND

### Steg 1: Kontaktuppgifter

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   ğŸ   BerÃ¤tta om ditt renoveringsprojekt                       â”‚
â”‚                                                                 â”‚
â”‚   Steg 1 av 4: Dina uppgifter                                  â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—‹â—‹â—‹â—‹                             â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Namn *                                                â”‚    â”‚
â”‚   â”‚  [                                              ]      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  E-post *                                              â”‚    â”‚
â”‚   â”‚  [                                              ]      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Telefon                                               â”‚    â”‚
â”‚   â”‚  [                                              ]      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚                                          [ NÃ¤sta â†’ ]           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Steg 2: Objektinfo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   ğŸ   Var ska renoveringen ske?                                â”‚
â”‚                                                                 â”‚
â”‚   Steg 2 av 4: Objektet                                        â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—‹â—‹â—‹                      â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Adress *                                              â”‚    â”‚
â”‚   â”‚  [                                              ]      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  Postnummer         â”‚  â”‚  Ort                        â”‚     â”‚
â”‚   â”‚  [            ]     â”‚  â”‚  [                    ]     â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚   Typ av bostad                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                     â”‚
â”‚   â”‚ ğŸ¡  â”‚ â”‚ ğŸ¢  â”‚ â”‚ ğŸ˜ï¸  â”‚ â”‚ ğŸ•ï¸  â”‚ â”‚ â“  â”‚                     â”‚
â”‚   â”‚Villaâ”‚ â”‚LÃ¤g. â”‚ â”‚Rad  â”‚ â”‚Frit.â”‚ â”‚Annatâ”‚                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                 â”‚
â”‚                              [ â† Tillbaka ]  [ NÃ¤sta â†’ ]       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Steg 3: Rum (huvudvy)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   ğŸ› ï¸  Vilka rum vill du renovera?                              â”‚
â”‚                                                                 â”‚
â”‚   Steg 3 av 4: Rum och Ã¶nskemÃ¥l                                â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—‹                â”‚
â”‚                                                                 â”‚
â”‚   Klicka pÃ¥ de rum du vill inkludera:                          â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚   ğŸ³    â”‚ â”‚   ğŸ›    â”‚ â”‚   ğŸ›‹ï¸    â”‚ â”‚   ğŸ›ï¸    â”‚              â”‚
â”‚   â”‚   KÃ¶k   â”‚ â”‚ Badrum  â”‚ â”‚ Vardags â”‚ â”‚ Sovrum  â”‚              â”‚
â”‚   â”‚   [+]   â”‚ â”‚   [âœ“]   â”‚ â”‚   [+]   â”‚ â”‚   [+]   â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚   ğŸš¿    â”‚ â”‚   ğŸ‘•    â”‚ â”‚   ğŸ     â”‚ â”‚   â•    â”‚              â”‚
â”‚   â”‚  WC/   â”‚ â”‚ TvÃ¤tt-  â”‚ â”‚  Hall   â”‚ â”‚  Annat  â”‚              â”‚
â”‚   â”‚ Dusch  â”‚ â”‚  stuga  â”‚ â”‚         â”‚ â”‚   rum   â”‚              â”‚
â”‚   â”‚   [+]   â”‚ â”‚   [+]   â”‚ â”‚   [+]   â”‚ â”‚   [+]   â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                 â”‚
â”‚   Valda rum:                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ğŸ› Badrum          [ Redigera ] [ Ta bort ]            â”‚  â”‚
â”‚   â”‚    "Totalrenovering av badrum"                          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚                              [ â† Tillbaka ]  [ NÃ¤sta â†’ ]       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Steg 3b: Rumdetaljer (Ã¶ppnas som sheet/modal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   ğŸ› Badrum                                          [ âœ• ]     â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Beskriv vad du vill gÃ¶ra *                           â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚   â”‚  â”‚ Totalrenovering. Byta kakel, nytt handfat,   â”‚    â”‚    â”‚
â”‚   â”‚  â”‚ duschvÃ¤gg, och eventuellt flytta toaletten.  â”‚    â”‚    â”‚
â”‚   â”‚  â”‚                                               â”‚    â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚   Vilka typer av arbete behÃ¶vs? (vÃ¤lj flera)                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ Rivningâ”‚ â”‚   El   â”‚ â”‚  VVS   â”‚ â”‚ Kakel  â”‚                  â”‚
â”‚   â”‚  [âœ“]   â”‚ â”‚  [âœ“]   â”‚ â”‚  [âœ“]   â”‚ â”‚  [âœ“]   â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚Snickeriâ”‚ â”‚MÃ¥lning â”‚ â”‚ Golv   â”‚ â”‚ Annat  â”‚                  â”‚
â”‚   â”‚  [ ]   â”‚ â”‚  [ ]   â”‚ â”‚  [âœ“]   â”‚ â”‚  [ ]   â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                 â”‚
â”‚   Prioritet                                                    â”‚
â”‚   â—‹ HÃ¶g (bÃ¶rja hÃ¤r fÃ¶rst)                                      â”‚
â”‚   â— Normal                                                      â”‚
â”‚   â—‹ LÃ¥g (kan vÃ¤nta)                                            â”‚
â”‚                                                                 â”‚
â”‚   ğŸ“· Bifoga bilder (valfritt)                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚   â”‚      â”‚ â”‚      â”‚ â”‚  +   â”‚                                   â”‚
â”‚   â”‚ img1 â”‚ â”‚ img2 â”‚ â”‚ LÃ¤gg â”‚                                   â”‚
â”‚   â”‚      â”‚ â”‚      â”‚ â”‚ till â”‚                                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                                 â”‚
â”‚                                         [ Spara rum ]          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Steg 4: Sammanfattning

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   âœ… Granska din fÃ¶rfrÃ¥gan                                     â”‚
â”‚                                                                 â”‚
â”‚   Steg 4 av 4: Sammanfattning                                  â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                                 â”‚
â”‚   ğŸ“‹ Dina uppgifter                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Anna Andersson                                          â”‚  â”‚
â”‚   â”‚ anna@example.com | 070-123 45 67                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   ğŸ  Objektet                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Storgatan 12, 123 45 Stockholm                          â”‚  â”‚
â”‚   â”‚ Villa                                                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   ğŸ› ï¸ Rum att renovera (2 st)                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ğŸ› Badrum (HÃ¶g prioritet)                               â”‚  â”‚
â”‚   â”‚    Totalrenovering. Byta kakel, nytt handfat...         â”‚  â”‚
â”‚   â”‚    Arbete: Rivning, El, VVS, Kakel, Golv                â”‚  â”‚
â”‚   â”‚    ğŸ“· 2 bilder                                          â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚ ğŸ³ KÃ¶k (Normal prioritet)                               â”‚  â”‚
â”‚   â”‚    Byta kÃ¶ksluckor och bÃ¤nkskiva                        â”‚  â”‚
â”‚   â”‚    Arbete: Snickeri                                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Ã–vriga kommentarer (valfritt)                        â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚   â”‚  â”‚                                               â”‚    â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚                    [ â† Tillbaka ]  [ Skicka fÃ¶rfrÃ¥gan âœ“ ]      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. BYGGARENS VY

### FÃ¶rfrÃ¥gningar-dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   KundfÃ¶rfrÃ¥gningar                    [ + Ny fÃ¶rfrÃ¥gan ]      â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Filter: [ Alla â–¾ ]  [ Senaste â–¾ ]                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ğŸŸ¢ NY                                          2h sedan â”‚  â”‚
â”‚   â”‚ Anna Andersson                                          â”‚  â”‚
â”‚   â”‚ Storgatan 12, Stockholm                                 â”‚  â”‚
â”‚   â”‚ 2 rum: Badrum, KÃ¶k                                      â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚ [ Visa detaljer ]  [ Skapa offert â†’ ]                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ğŸŸ¡ VÃ„NTAR PÃ… SVAR                             3 dagar â”‚  â”‚
â”‚   â”‚ Erik Eriksson                                           â”‚  â”‚
â”‚   â”‚ LÃ¤nk skickad, ej ifylld                                 â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚ [ Skicka pÃ¥minnelse ]  [ Avbryt ]                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ âœ… KONVERTERAD                                 1 vecka â”‚  â”‚
â”‚   â”‚ Maria Johansson â†’ Offert #2024-015                      â”‚  â”‚
â”‚   â”‚ KÃ¶ksrenovering SÃ¶dermalm                                â”‚  â”‚
â”‚   â”‚                                                         â”‚  â”‚
â”‚   â”‚ [ Visa offert ]                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. KONVERTERING: FÃ–RFRÃ…GAN â†’ OFFERT

### FlÃ¶de

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  Kundens fÃ¶rfrÃ¥gan                         Genererad data                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                                                             â”‚
â”‚  rooms_data: [                             RUM (rooms-tabell):              â”‚
â”‚    {                                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚      name: "Badrum",          â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚ id: uuid                    â”‚  â”‚
â”‚      description: "Total..."               â”‚ name: "Badrum"              â”‚  â”‚
â”‚      work_types: [riv,el,vvs]              â”‚ description: "Total..."     â”‚  â”‚
â”‚    }                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  ]                                                                          â”‚
â”‚                                            UPPGIFTER (tasks-tabell):        â”‚
â”‚                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  work_types: ["rivning"]      â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚ title: "Rivning - Badrum"   â”‚  â”‚
â”‚                                            â”‚ cost_center: "demolition"   â”‚  â”‚
â”‚                                            â”‚ room_id: (badrum)           â”‚  â”‚
â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  work_types: ["el"]           â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚ title: "El - Badrum"        â”‚  â”‚
â”‚                                            â”‚ cost_center: "electrical"   â”‚  â”‚
â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  work_types: ["vvs"]          â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚ title: "VVS - Badrum"       â”‚  â”‚
â”‚                                            â”‚ cost_center: "plumbing"     â”‚  â”‚
â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚                                            MATERIAL (fÃ¶rslag, utan pris):   â”‚
â”‚  work_types + AI-fÃ¶rslag      â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                            â”‚ name: "Klinker 30x30"       â”‚  â”‚
â”‚                                            â”‚ quantity: null (ej satt)    â”‚  â”‚
â”‚                                            â”‚ cost: null (byggare fyller) â”‚  â”‚
â”‚                                            â”‚ status: "draft"             â”‚  â”‚
â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚                                            OFFERT (quotes-tabell):          â”‚
â”‚  Allt ovan                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                            â”‚ title: frÃ¥n kundens adress  â”‚  â”‚
â”‚                                            â”‚ client: frÃ¥n kundens uppg.  â”‚  â”‚
â”‚                                            â”‚ items: frÃ¥n tasks + manuelltâ”‚  â”‚
â”‚                                            â”‚ status: "draft"             â”‚  â”‚
â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mappning: work_types â†’ cost_center

```typescript
const WORK_TYPE_TO_COST_CENTER: Record<string, string> = {
  rivning: "demolition",
  el: "electrical",
  vvs: "plumbing",
  kakel: "tiling",
  snickeri: "carpentry",
  malning: "painting",
  golv: "flooring",
  kok: "kitchen",
  badrum: "bathroom",
  annat: "other",
};
```

---

## 7. PROJEKTLÃ…SNING

### Status-flÃ¶de med lÃ¥sning

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   OFFERT-STATUS              PROJEKT-TILLSTÃ…ND                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                              â”‚
â”‚   â”‚  draft   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Projekt redigerbart (normalt)                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               Rum, Tasks, Material kan Ã¤ndras               â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â–¼                                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                              â”‚
â”‚   â”‚   sent   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Projekt LÃ…ST                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               - Inga Ã¤ndringar i Rum                        â”‚
â”‚        â”‚                     - Inga Ã¤ndringar i Tasks                      â”‚
â”‚        â”‚                     - Inga Ã¤ndringar i Material                   â”‚
â”‚        â”‚                     - Offerten kan kommenteras                     â”‚
â”‚        â”‚                     - UI visar ğŸ”’ + varning                       â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚        â–¼               â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚ accepted â”‚   â”‚ rejected â”‚                                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚        â”‚               â”‚                                                    â”‚
â”‚        â–¼               â–¼                                                    â”‚
â”‚   Projekt aktivt    Ã…tergÃ¥ till draft                                      â”‚
â”‚   Kund fÃ¥r access   (byggare vÃ¤ljer)                                       â”‚
â”‚                                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                             â”‚
â”‚   SPECIALFALL: "RedigeringslÃ¤ge"                                           â”‚
â”‚                                                                             â”‚
â”‚   Om byggare vill Ã¤ndra efter "sent":                                      â”‚
â”‚   1. Klicka "LÃ¥s upp fÃ¶r redigering"                                       â”‚
â”‚   2. Status â†’ "draft" (eller ny status "editing")                          â”‚
â”‚   3. Projekt lÃ¥ses upp                                                      â”‚
â”‚   4. Byggare gÃ¶r Ã¤ndringar                                                 â”‚
â”‚   5. Skickar offerten igen â†’ "sent" â†’ LÃ¥st igen                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UI-implementation

```tsx
// I TasksTab, PurchasesTab, RoomsList etc:

function TasksTab({ project }) {
  const isLocked = project.locked_for_quote;

  if (isLocked) {
    return (
      <Alert variant="warning">
        <Lock className="h-4 w-4" />
        <AlertTitle>{t("project.lockedForQuote")}</AlertTitle>
        <AlertDescription>
          {t("project.lockedDescription")}
          <Button variant="link" onClick={goToQuote}>
            {t("project.viewQuote")}
          </Button>
        </AlertDescription>
      </Alert>
    );
  }

  // ... normal rendering
}
```

---

## 8. ACCEPTANSFLÃ–DE (UTÃ–KAT)

### Nuvarande (ViewQuote.tsx handleAccept)

```typescript
// NUVARANDE:
1. Ã„ndra quote.status â†’ "accepted"
2. Skapa Tasks frÃ¥n quote_items
3. Visa konfetti ğŸ‰
```

### UtÃ¶kat flÃ¶de

```typescript
// NYTT:
async function handleAccept() {
  // 1. Ã„ndra quote.status â†’ "accepted"
  await updateQuoteStatus(quoteId, "accepted");

  // 2. Skapa Tasks frÃ¥n quote_items (finns redan)
  await createTasksFromQuote(quote);

  // 3. NY: Skapa Material/InkÃ¶psfÃ¶rslag frÃ¥n intake_request
  if (quote.intake_request_id) {
    const intakeRequest = await getIntakeRequest(quote.intake_request_id);
    await createMaterialSuggestionsFromIntake(projectId, intakeRequest);
  }

  // 4. NY: Bjud in kund som "client" automatiskt
  if (quote.client?.email) {
    await inviteClientToProject(projectId, {
      email: quote.client.email,
      name: quote.client.name,
      role: "client", // view-only
    });
  }

  // 5. NY: LÃ¥s upp projektet (det var lÃ¥st under "sent")
  await unlockProject(projectId);

  // 6. NY: Markera intake_request som "converted"
  if (quote.intake_request_id) {
    await updateIntakeStatus(quote.intake_request_id, "converted");
  }

  // 7. Visa konfetti ğŸ‰
  confetti();
}
```

---

## 9. E-POSTMALLAR

### Mall 1: FÃ¶rfrÃ¥gan till kund

```
Ã„mne: [Byggfirma AB] vill veta mer om ditt renoveringsprojekt

Hej!

[Byggfirma AB] har skapat en fÃ¶rfrÃ¥gan fÃ¶r att lÃ¤ra sig mer om
ditt renoveringsprojekt.

Klicka pÃ¥ lÃ¤nken nedan fÃ¶r att fylla i ett enkelt formulÃ¤r dÃ¤r du
beskriver vad du vill ha gjort:

[KNAPP: Fyll i fÃ¶rfrÃ¥gan]

LÃ¤nken Ã¤r giltig i 30 dagar.

Med vÃ¤nliga hÃ¤lsningar,
Renomate
```

### Mall 2: Offert till kund

```
Ã„mne: Offert frÃ¥n [Byggfirma AB] - [Projektnamn]

Hej [Kundnamn]!

[Byggfirma AB] har skapat en offert fÃ¶r ditt renoveringsprojekt.

Projektsammanfattning:
- [Antal] rum
- Totalt: [Belopp] kr (inkl. moms)
- ROT-avdrag: [Belopp] kr
- Att betala: [Belopp] kr

[KNAPP: Visa och godkÃ¤nn offert]

Offerten Ã¤r giltig till [Datum].

Med vÃ¤nliga hÃ¤lsningar,
[Byggfirma AB]
```

---

## 10. i18n-NYCKLAR

```json
{
  "intake": {
    "title": "BerÃ¤tta om ditt projekt",
    "step1Title": "Dina uppgifter",
    "step2Title": "Objektet",
    "step3Title": "Rum och Ã¶nskemÃ¥l",
    "step4Title": "Sammanfattning",

    "name": "Namn",
    "email": "E-post",
    "phone": "Telefon",

    "address": "Adress",
    "postalCode": "Postnummer",
    "city": "Ort",
    "propertyType": "Typ av bostad",
    "villa": "Villa",
    "apartment": "LÃ¤genhet",
    "townhouse": "Radhus",
    "vacation": "Fritidshus",
    "other": "Annat",

    "selectRooms": "Vilka rum vill du renovera?",
    "addRoom": "LÃ¤gg till rum",
    "roomDescription": "Beskriv vad du vill gÃ¶ra",
    "workTypes": "Vilka typer av arbete behÃ¶vs?",
    "priority": "Prioritet",
    "priorityHigh": "HÃ¶g (bÃ¶rja hÃ¤r fÃ¶rst)",
    "priorityNormal": "Normal",
    "priorityLow": "LÃ¥g (kan vÃ¤nta)",
    "attachImages": "Bifoga bilder",

    "summary": "Granska din fÃ¶rfrÃ¥gan",
    "submit": "Skicka fÃ¶rfrÃ¥gan",
    "submitted": "Tack! Din fÃ¶rfrÃ¥gan har skickats.",
    "submittedDescription": "Vi Ã¥terkommer inom kort med en offert.",

    "requests": "KundfÃ¶rfrÃ¥gningar",
    "newRequest": "Ny fÃ¶rfrÃ¥gan",
    "pending": "VÃ¤ntar pÃ¥ svar",
    "submitted": "Inskickad",
    "converted": "Konverterad till offert",
    "expired": "UtgÃ¥ngen",

    "createQuote": "Skapa offert",
    "viewDetails": "Visa detaljer",
    "sendReminder": "Skicka pÃ¥minnelse",
    "cancel": "Avbryt"
  },

  "project": {
    "lockedForQuote": "Projektet Ã¤r lÃ¥st",
    "lockedDescription": "En offert har skickats till kunden. Ã„ndringar Ã¤r inte tillÃ¥tna fÃ¶rrÃ¤n offerten har hanterats.",
    "viewQuote": "Visa offert",
    "unlockForEditing": "LÃ¥s upp fÃ¶r redigering"
  }
}
```

---

## 11. IMPLEMENTATIONSORDNING

### Fas 1: Databasfundament âœ… KLAR
1. âœ… Skapa migration fÃ¶r `customer_intake_requests`
2. âœ… Uppdatera `quotes` med `intake_request_id`
3. âœ… Uppdatera `projects` med lÃ¥sningsfÃ¤lt
4. âœ… RLS-policies

### Fas 2: KundformulÃ¤r âœ… KLAR
5. âœ… Skapa `IntakeWizard` komponent
6. âœ… Implementera alla steg (Contact, Property, Rooms, Summary)
7. â³ Bilduppladdning i formulÃ¤ret (planerat fÃ¶r Fas 7)
8. âœ… Publik sida `/intake/:token`
9. âœ… Token-validering via RLS

### Fas 3: Byggarens dashboard âœ… KLAR
10. âœ… Skapa `IntakeRequests` sida
11. âœ… `IntakeRequestCard` och `IntakeRequestDetail`
12. âœ… "Skapa fÃ¶rfrÃ¥gan"-flÃ¶de
13. â³ E-postsÃ¤ndning till kund (planerat fÃ¶r Fas 6)

### Fas 4: Konvertering till offert âœ… KLAR
14. âœ… KonverteringsflÃ¶de i `IntakeRequestDetail`
15. âœ… Logik fÃ¶r att skapa Rum/Tasks frÃ¥n intake
16. âœ… Koppling till befintlig offertmodul
17. â³ Material-fÃ¶rslag (planerat fÃ¶r senare)

### Fas 5: ProjektlÃ¥sning âœ… KLAR
18. âœ… UI-spÃ¤rrar i TasksTab, PurchasesTab, OverviewTab
19. âœ… LÃ¥snings-/upplÃ¥sningslogik i `projectLockService.ts`
20. âœ… Status-hantering i offertflÃ¶det (`quoteService.ts`)

### Fas 6: UtÃ¶kat acceptansflÃ¶de âœ… KLAR
21. â³ Skapa Material vid accept (senare)
22. âœ… Auto-invite kund som "client" via `inviteCustomerAsClient()`
23. âœ… E-postinbjudan skickas automatiskt

### Fas 7: Polish (NÃ„STA)
24. â³ i18n (alla sprÃ¥k) - EN + SV klara
25. â³ Mobiloptimering
26. â³ Felhantering och edge cases
27. â³ Tester

**Status: Fas 1-6 klara, Fas 7 Ã¥terstÃ¥r**

---

## 12. BESLUT (BEKRÃ„FTADE)

| # | FrÃ¥ga | Beslut |
|---|-------|--------|
| 1 | Ska kund kunna redigera efter inskickning? | **Nej** - kontakta byggare fÃ¶r ny |
| 2 | Ska byggare kunna skapa "tom" fÃ¶rfrÃ¥gan? | **Ja** - kund fyller i sina uppgifter |
| 3 | Ska bilder vara obligatoriska? | **Nej** - valfritt |
| 4 | Hur lÃ¤nge Ã¤r fÃ¶rfrÃ¥gan giltig? | **30 dagar** |
| 5 | Ska AI hjÃ¤lpa tolka kundens fritext? | **Fas 2** |
| 6 | Ska kund se pris i formulÃ¤ret? | **Nej** - kommer med offerten |
| 7 | Visa byggarens logga/namn pÃ¥ formulÃ¤r? | **Ja** |
| 8 | Flera offerter per fÃ¶rfrÃ¥gan? | **Ja** (S/M/L-alternativ) |
| 9 | Notis vid inskickning? | **Ja** - i appen + e-post |
| 10 | Spara kunddata i clients-tabellen? | **Ja** - automatiskt |
| 11 | Kund kan dÃ¶pa rum sjÃ¤lv? | **Ja** |
| 12 | SprÃ¥k pÃ¥ formulÃ¤ret? | **WebblÃ¤sarsprÃ¥k + sprÃ¥kvÃ¤ljare** |
| 13 | Arbetstyper? | **Brett** - se lista nedan |

### Arbetstyper (work_types)

```
rivning, el, vvs, kakel, snickeri, mÃ¥lning, golv,
kÃ¶k, badrum, fÃ¶nster_dÃ¶rrar, fasad, tak, trÃ¤dgÃ¥rd, annat
```

---

*Skapad: 2026-02-11*
*Uppdaterad: 2026-02-11*
*Version: 1.2 - Fas 1-6 implementerade*
