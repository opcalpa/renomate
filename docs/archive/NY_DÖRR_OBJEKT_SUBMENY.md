# ğŸšª Ny Funktion: DÃ¶rr-knapp med Objekt & Former Submeny

## âœ¨ Vad Ã„r Nytt?

DÃ¶rr-knappen har nu **dubbel funktionalitet** precis som vÃ¤gg-knappen:

### 1. Placera DÃ¶rr (Som FÃ¶rut)
Klicka pÃ¥ huvuddelen av dÃ¶rr-knappen fÃ¶r att placera dÃ¶rrar direkt.

### 2. Objekt & Former Submeny (NYT!)
Ã–ppna en rik submeny med:
- **VÃ¤ggÃ¶ppningar** (fÃ¶nster)
- **Grundformer** (fyrkant, cirkel, triangel)
- **Streckade former** (samma former med streckad kant)
- **Rundade former** (samma former med rundade hÃ¶rn)

## ğŸ“ Objekt i Submenyn

### ğŸªŸ VÃ¤ggÃ¶ppning
**FÃ¶nster**
- Ã–ppning i vÃ¤gg
- Fungerar som den tidigare "VÃ¤ggÃ¶ppning"-knappen
- Perfekt fÃ¶r fÃ¶nster och andra vÃ¤ggÃ¶ppningar

### â¬œ Grundformer (Solida linjer)
**Fyrkant**
- Rektangel med raka kanter
- Normal solid linje
- AnvÃ¤ndning: MÃ¶bler, rum, avgrÃ¤nsningar

**Cirkel**
- Perfekt rund cirkel
- Normal solid linje
- AnvÃ¤ndning: Runda bord, element, dekorationer

**Triangel**
- Tre sidor, raka linjer
- Normal solid linje
- AnvÃ¤ndning: Designelement, pilar, markeringar

### - - - Streckade Former
Samma former som ovan men med streckade linjer fÃ¶r att visa:
- TemporÃ¤ra element
- Planerade tillÃ¤gg
- Frivilliga/optionella delar
- GrÃ¤nser utan fysisk barriÃ¤r

**Fyrkant (streckad)**
- Rektangel med streckad kant
- AnvÃ¤ndning: Planerad mÃ¶blering, framtida expansion

**Cirkel (streckad)**
- Cirkel med streckad kant
- AnvÃ¤ndning: AktivitetsomrÃ¥den, ljuskoner

**Triangel (streckad)**
- Triangel med streckad kant
- AnvÃ¤ndning: Siktlinjer, riktningsmarkeringar

### â—¯ Rundade Former
Samma former med mjuka, rundade hÃ¶rn fÃ¶r en mjukare estetik:

**Fyrkant (rundade hÃ¶rn)**
- Rektangel med rundade hÃ¶rn
- Mjukare, modernare look
- AnvÃ¤ndning: Moderna mÃ¶bler, display-element

**Triangel (rundad)**
- Triangel med rundade hÃ¶rn
- Mjukare estetik
- AnvÃ¤ndning: Designelement med mjukare kÃ¤nsla

## ğŸ¯ Hur AnvÃ¤nder Man Det?

### Metod 1: HÃ¶gerklick
```
1. HÃ¶gerklicka pÃ¥ dÃ¶rr-knappen (ğŸšª)
2. VÃ¤lj kategori och form frÃ¥n menyn
3. Klicka pÃ¥ canvas fÃ¶r att placera objektet
```

### Metod 2: Klick pÃ¥ Kant
```
1. Klicka pÃ¥ den hÃ¶gra delen av dÃ¶rr-knappen
2. Submenyn Ã¶ppnas automatiskt
3. VÃ¤lj objekt
4. Placera pÃ¥ canvas
```

### Metod 3: Visuell Guide
```
1. Se efter den lilla pilen (â–¶) i nedre hÃ¶gra hÃ¶rnet
2. Hover fÃ¶r tooltip med instruktioner
```

## ğŸ“‹ Submeny-struktur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VÃ„GGÃ–PPNING                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸªŸ FÃ¶nster                       â”‚
â”‚    Ã–ppning i vÃ¤gg                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GRUNDFORMER                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬œ Fyrkant    â­• Cirkel           â”‚
â”‚ ğŸ”º Triangel                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ STRECKADE FORMER                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬œ Fyrkant    â­• Cirkel           â”‚
â”‚ ğŸ”º Triangel                      â”‚
â”‚ (alla med streckade linjer)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RUNDADE HÃ–RN                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—»ï¸ Fyrkant    ğŸ”º Triangel         â”‚
â”‚ (med mjuka rundade hÃ¶rn)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Use Cases per Objekttyp

### VÃ¤ggÃ¶ppning - FÃ¶nster
```
AnvÃ¤ndning:
- FÃ¶nster i yttervÃ¤ggar
- FÃ¶nster mellan rum (passage)
- Ã–ppningar fÃ¶r ventilation
- Ã–ppna passager

Exempel pÃ¥ ritningen:
- Stora fÃ¶nster i vardagsrum
- FÃ¶nster i sovrum
- BalkongdÃ¶rr (stor Ã¶ppning)
```

### Grundformer (Solida)
```
Fyrkant:
- MÃ¶bler: Bord, soffor, sÃ¤ngar
- Vitvaror: KylskÃ¥p, spis, tvÃ¤ttmaskin
- SkÃ¥p och fÃ¶rvaring
- AvgrÃ¤nsade omrÃ¥den

Cirkel:
- Runda bord
- Lampor (ovanifrÃ¥n)
- Runda element
- Pelare (cirkulÃ¤ra)

Triangel:
- Pilar fÃ¶r riktning
- Designelement
- TriangulÃ¤ra mÃ¶bler
- Markeringar
```

### Streckade Former
```
AnvÃ¤ndning:
- Planerade mÃ¶bler (ej kÃ¶pta Ã¤nnu)
- Framtida expansion
- TemporÃ¤ra lÃ¶sningar
- AktivitetsomrÃ¥den
- Ljuskonor frÃ¥n lampor
- Siktlinjer
- Frivilliga element

Exempel:
- "Eventuellt stort bord hÃ¤r"
- "Planerad utbyggnad"
- "Siktlinje frÃ¥n fÃ¶nster"
```

### Rundade Former
```
AnvÃ¤ndning:
- Moderna mÃ¶bler med mjuka former
- Display-element
- Mjukare estetik i moderna hem
- Designelement
- Barn-vÃ¤nliga ytor

Exempel:
- Modern soffa med rundade hÃ¶rn
- Mjukt avrundat kÃ¶ksÃ¶
- Rundade fÃ¶rvaringsmÃ¶bler
```

## ğŸ”„ JÃ¤mfÃ¶relse: FÃ¶re vs Efter

### FÃ–RE
```
â”Œâ”€â”€â”€â”€â”€â”
â”‚ ğŸšª  â”‚ â† DÃ¶rr (Placera dÃ¶rr)
â””â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”
â”‚ â–­   â”‚ â† VÃ¤ggÃ¶ppning (Separat knapp)
â””â”€â”€â”€â”€â”€â”˜
```

### EFTER
```
â”Œâ”€â”€â”€â”€â”€â”
â”‚ ğŸšªâ–¶ â”‚ â† DÃ¶rr (Placera dÃ¶rr + Rik submeny)
â””â”€â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”€â”€â–º HÃ¶gerklicka â†’ Submeny
           â”œâ”€ VÃ¤ggÃ¶ppning
           â”‚  â””â”€ FÃ¶nster
           â”œâ”€ Grundformer
           â”‚  â”œâ”€ Fyrkant
           â”‚  â”œâ”€ Cirkel
           â”‚  â””â”€ Triangel
           â”œâ”€ Streckade former
           â”‚  â”œâ”€ Fyrkant
           â”‚  â”œâ”€ Cirkel
           â”‚  â””â”€ Triangel
           â””â”€ Rundade hÃ¶rn
              â”œâ”€ Fyrkant
              â””â”€ Triangel
```

## ğŸ’¡ FÃ¶rdelar

### 1. **Alla Objekt pÃ¥ Ett StÃ¤lle**
Allt du behÃ¶ver fÃ¶r att lÃ¤gga till objekt finns under dÃ¶rr-knappen.

### 2. **Organiserad Struktur**
Tydlig gruppering:
- VÃ¤ggÃ¶ppningar
- Grundformer
- Streckade former
- Rundade former

### 3. **Mindre Toolbar**
VÃ¤ggÃ¶ppning-knappen Ã¤r borttagen, allt finns i submenyn.

### 4. **Fler Alternativ**
12 olika objekttyper istÃ¤llet fÃ¶r 2-3 tidigare.

### 5. **Professionell Presentation**
Olika linjestilar (solid, streckad) och form-varianter.

## ğŸ¨ Visuella Exempel

### Solid vs Streckad vs Rundad
```
SOLID (Normal)        STRECKAD           RUNDAD
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œ â”€ â”€ â”€ â”€ â”         â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚         â”‚          â”‚         â”‚         â”‚         â”‚
â”‚         â”‚          â”‚         â”‚         â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”” â”€ â”€ â”€ â”€ â”˜         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

AnvÃ¤ndning:           AnvÃ¤ndning:         AnvÃ¤ndning:
- Fasta mÃ¶bler        - Planerat          - Moderna mÃ¶bler
- VÃ¤ggar              - TemporÃ¤rt         - Mjukare design
- Permanenta objekt   - Frivilligt        - BarnsÃ¤kert
```

## ğŸ—ï¸ Professionell AnvÃ¤ndning

### Arkitekt-ritning med Streckade Linjer
```
Enligt svensk/internationell standard anvÃ¤nds streckade linjer fÃ¶r:

1. Dolda element (ej synliga i plan)
2. Planerade tillÃ¤gg
3. Demoleringar (ibland)
4. Alternativa lÃ¶sningar
5. RÃ¶relser/flÃ¶den
6. Siktlinjer

Exempel i ritning:
- Streckad fyrkant = "Planerad soffa"
- Streckad cirkel = "Ljuskon frÃ¥n lampa"
- Streckad linje = "Siktlinje frÃ¥n kÃ¶k till vardagsrum"
```

### Moderna Ritningar med Rundade HÃ¶rn
```
Rundade hÃ¶rn anvÃ¤nds fÃ¶r:
- Moderna mÃ¶bler med mjuk design
- SÃ¤krare miljÃ¶er (fÃ¶rskolor, sjukhus)
- Estetisk variation
- Designelement som sticker ut

Exempel:
- Rundad fyrkant = "Modern soffa frÃ¥n IKEA"
- Rundad triangel = "Designelement i hÃ¶rn"
```

## âŒ¨ï¸ Workflow-exempel

### Scenario 1: Rita Vardagsrum med MÃ¶bler
```
1. Rita vÃ¤ggar med vÃ¤gg-verktyget
2. Placera dÃ¶rr med dÃ¶rr-verktyget (direkt klick)
3. HÃ¶gerklicka dÃ¶rr-knappen â†’ VÃ¤ggÃ¶ppning â†’ FÃ¶nster
4. Placera fÃ¶nster i yttervÃ¤gg
5. HÃ¶gerklicka dÃ¶rr-knappen â†’ Grundformer â†’ Fyrkant
6. Placera soffa
7. HÃ¶gerklicka dÃ¶rr-knappen â†’ Grundformer â†’ Cirkel
8. Placera runt soffbord
9. Spara (Cmd+S)
```

### Scenario 2: Planera Framtida Inredning
```
1. Rita rummet (vÃ¤ggar + dÃ¶rrar)
2. Placera fasta mÃ¶bler med SOLIDA former
3. HÃ¶gerklicka dÃ¶rr-knappen â†’ Streckade former â†’ Fyrkant
4. Placera ut planerade mÃ¶bler (ej kÃ¶pta)
5. LÃ¤gg till text: "Planerad bokhylla"
6. Spara ritningen
```

### Scenario 3: Modern Design-ritning
```
1. Rita rummet
2. HÃ¶gerklicka dÃ¶rr-knappen â†’ Rundade hÃ¶rn â†’ Fyrkant
3. Placera moderna mÃ¶bler med rundade hÃ¶rn
4. Skapa en mjuk, modern estetik
5. AnvÃ¤nd fÃ¤rger fÃ¶r att highlighta
```

## ğŸ”§ Tekniska Detaljer

### Objekt-typer (Object Types)
```typescript
// VÃ¤ggÃ¶ppningar
'window'                    // FÃ¶nster

// Grundformer
'rectangle'                 // Fyrkant (solid)
'circle'                    // Cirkel (solid)
'triangle'                  // Triangel (solid)

// Streckade former
'rectangle-dashed'          // Fyrkant (streckad)
'circle-dashed'             // Cirkel (streckad)
'triangle-dashed'           // Triangel (streckad)

// Rundade former
'rectangle-rounded'         // Fyrkant (rundade hÃ¶rn)
'triangle-rounded'          // Triangel (rundade hÃ¶rn)
```

### Implementation
```typescript
const handleDoorObject = (objectType: string) => {
  (window as any).__createDoorObject = objectType;
  
  if (objectType === 'window') {
    setActiveTool('opening'); // VÃ¤ggÃ¶ppning
  } else {
    setActiveTool('select'); // Placering
  }
  
  setDoorSubmenuOpen(false);
};
```

### Canvas-hantering
```typescript
// I UnifiedKonvaCanvas.tsx kommer detta behÃ¶vas:
useEffect(() => {
  const objectType = (window as any).__createDoorObject;
  
  if (objectType) {
    // Skapa och placera objektet baserat pÃ¥ typ
    createObjectOnCanvas(objectType);
    delete (window as any).__createDoorObject;
  }
}, []);
```

## ğŸ§ª Testa Funktionen

### Test 1: Placera FÃ¶nster
```
1. HÃ¶gerklicka dÃ¶rr-knappen
2. VÃ¤ggÃ¶ppning â†’ FÃ¶nster
3. Klicka pÃ¥ vÃ¤gg
âœ… FÃ¶nster placeras i vÃ¤ggen
```

### Test 2: Rita Solid Fyrkant
```
1. HÃ¶gerklicka dÃ¶rr-knappen
2. Grundformer â†’ Fyrkant
3. Klicka pÃ¥ canvas
âœ… Solid fyrkant placeras
```

### Test 3: Rita Streckad Cirkel
```
1. HÃ¶gerklicka dÃ¶rr-knappen
2. Streckade former â†’ Cirkel
3. Klicka pÃ¥ canvas
âœ… Cirkel med streckad kant placeras
```

### Test 4: Rita Rundad Fyrkant
```
1. HÃ¶gerklicka dÃ¶rr-knappen
2. Rundade hÃ¶rn â†’ Fyrkant
3. Klicka pÃ¥ canvas
âœ… Fyrkant med rundade hÃ¶rn placeras
```

## ğŸ“Š Alla 12 Objekttyper

| # | Typ | Kategori | Linjestil | AnvÃ¤ndning |
|---|-----|----------|-----------|------------|
| 1 | FÃ¶nster | VÃ¤ggÃ¶ppning | N/A | Ã–ppningar i vÃ¤ggar |
| 2 | Fyrkant | Grundform | Solid | MÃ¶bler, avgrÃ¤nsningar |
| 3 | Cirkel | Grundform | Solid | Runda element |
| 4 | Triangel | Grundform | Solid | Pilar, markeringar |
| 5 | Fyrkant | Streckad | Streckad | Planerade element |
| 6 | Cirkel | Streckad | Streckad | Ljuskonor, omrÃ¥den |
| 7 | Triangel | Streckad | Streckad | Siktlinjer |
| 8 | Fyrkant | Rundad | Solid + rundad | Moderna mÃ¶bler |
| 9 | Triangel | Rundad | Solid + rundad | Mjuka designelement |

## âœ… Verifiering

Efter uppdateringen ska du se:

1. âœ… DÃ¶rr-knappen har liten pil (â–¶) i hÃ¶rnet
2. âœ… HÃ¶gerklick Ã¶ppnar submeny med 4 sektioner
3. âœ… VÃ¤ggÃ¶ppning-knappen Ã¤r borta frÃ¥n toolbar
4. âœ… 12 olika objekttyper finns i submenyn
5. âœ… Tooltip visar "HÃ¶gerklicka fÃ¶r objekt & former"

## ğŸš€ Framtida FÃ¶rbÃ¤ttringar

### Fler Formvarianter
- [ ] Ellips (oval)
- [ ] Polygon (5-8 kanter)
- [ ] StjÃ¤rna
- [ ] Pil (olika riktningar)
- [ ] Hexagon
- [ ] Oktagon

### Fler Linjestilar
- [ ] Dubbellinje (fÃ¶r vÃ¤ggar i mÃ¶bler)
- [ ] Prickad linje
- [ ] Streck-prick linje
- [ ] Tjock/tunn variation

### Smart Features
- [ ] Storlek-presets (Small/Medium/Large)
- [ ] RoteringsmÃ¶jlighet vid placering
- [ ] Snabbtangenter fÃ¶r varje form
- [ ] Favorit-objekt (fÃ¶r snabb Ã¥tkomst)

## ğŸ’¬ Feedback

Om du har synpunkter:

### Vad Fungerar Bra?
- [ ] Tydlig organisering i kategorier
- [ ] LÃ¤tt att hitta rÃ¤tt objekttyp
- [ ] Bra variation av former

### Vad Kan FÃ¶rbÃ¤ttras?
- [ ] Submenyn Ã¤r fÃ¶r stor (scrollning krÃ¤vs)
- [ ] Fler formvarianter behÃ¶vs
- [ ] Preview av form innan placering

## ğŸ‰ Sammanfattning

**DÃ¶rr-knappen Ã¤r nu ett kraftfullt verktyg med 12 objekttyper:**

### Tidigare
- Placera dÃ¶rr
- (Separat knapp fÃ¶r vÃ¤ggÃ¶ppning)

### Nu
1. **Placera dÃ¶rr** (direkt klick)
2. **HÃ¶gerklick â†’ 12 objekttyper:**
   - 1x VÃ¤ggÃ¶ppning (fÃ¶nster)
   - 3x Grundformer (solid)
   - 3x Streckade former
   - 2x Rundade former

**Detta gÃ¶r verktyget mycket mer kraftfullt fÃ¶r professionella arkitekt-ritningar!** ğŸš€

---

**BÃ¶rja anvÃ¤nda det nu!** HÃ¶gerklicka pÃ¥ dÃ¶rr-knappen och utforska alla mÃ¶jligheter! ğŸ¨
